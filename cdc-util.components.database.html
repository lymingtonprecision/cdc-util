<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>cdc-util.components.database documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Cdc-util</span> <span class="project-version">1.3.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cdc-util</span></div></div></li><li class="depth-2 branch"><a href="cdc-util.async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>components</span></div></div></li><li class="depth-3 branch current"><a href="cdc-util.components.database.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>database</span></div></a></li><li class="depth-3"><a href="cdc-util.components.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-2 branch"><a href="cdc-util.env.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>env</span></div></a></li><li class="depth-2 branch"><a href="cdc-util.filter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>filter</span></div></a></li><li class="depth-2 branch"><a href="cdc-util.format.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>format</span></div></a></li><li class="depth-2 branch"><a href="cdc-util.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-2"><a href="cdc-util.schema.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schema</span></div></a></li><li class="depth-3"><a href="cdc-util.schema.oracle-refs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oracle-refs</span></div></a></li><li class="depth-2"><a href="cdc-util.validate.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>validate</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="cdc-util.components.database.html#var--.3EDatabase"><div class="inner"><span>-&gt;Database</span></div></a></li><li class="depth-1"><a href="cdc-util.components.database.html#var-default-options"><div class="inner"><span>default-options</span></div></a></li><li class="depth-1"><a href="cdc-util.components.database.html#var-env-.3Edatabase-opts"><div class="inner"><span>env-&gt;database-opts</span></div></a></li><li class="depth-1"><a href="cdc-util.components.database.html#var-map-.3EDatabase"><div class="inner"><span>map-&gt;Database</span></div></a></li><li class="depth-1"><a href="cdc-util.components.database.html#var-new-database"><div class="inner"><span>new-database</span></div></a></li><li class="depth-1"><a href="cdc-util.components.database.html#var-new-database-from-env"><div class="inner"><span>new-database-from-env</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">cdc-util.components.database</h1><div class="doc"><div class="markdown"><p>A component to manage (pooled) database connections using HikariCP.</p>
<p>Defaults to using the Oracle Thin driver for connections with a min/max pool size of 2/20 connections.</p></div></div><div class="public anchor" id="var--.3EDatabase"><h3>-&gt;Database</h3><div class="usage"><code>(-&gt;Database options)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class cdc_util.components.database.Database.</p></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/components/database.clj#L27">view source</a></div></div><div class="public anchor" id="var-default-options"><h3>default-options</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/components/database.clj#L13">view source</a></div></div><div class="public anchor" id="var-env-.3Edatabase-opts"><h3>env-&gt;database-opts</h3><div class="usage"><code>(env-&gt;database-opts env)</code></div><div class="doc"><div class="markdown"><p>Returns a map of component options derived from the given environment variable map.</p>
<p>The supported env variables are:</p>
<ul>
  <li><code>:db-name</code> (<code>DB_NAME</code>)</li>
  <li><code>:db-server</code> (<code>DB_SERVER</code>)</li>
  <li><code>:db-user</code> (<code>DB_USER</code>)</li>
  <li><code>:db-password (</code>DB_PASSWORD`)</li>
</ul></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/components/database.clj#L54">view source</a></div></div><div class="public anchor" id="var-map-.3EDatabase"><h3>map-&gt;Database</h3><div class="usage"><code>(map-&gt;Database m__6289__auto__)</code></div><div class="doc"><div class="markdown"><p>Factory function for class cdc_util.components.database.Database, taking a map of keywords to field values.</p></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/components/database.clj#L27">view source</a></div></div><div class="public anchor" id="var-new-database"><h3>new-database</h3><div class="usage"><code>(new-database opts)</code></div><div class="doc"><div class="markdown"><p>Returns a new, un-started, database component.</p>
<p>Must be provided with a map of datasource options specifying, at a minimum, the:</p>
<ul>
  <li><code>:database-name</code></li>
  <li><code>:server-name</code></li>
  <li><code>:username</code></li>
  <li><code>:password</code></li>
</ul></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/components/database.clj#L41">view source</a></div></div><div class="public anchor" id="var-new-database-from-env"><h3>new-database-from-env</h3><div class="usage"><code>(new-database-from-env env)</code></div><div class="doc"><div class="markdown"><p>Returns a new, un-started, database component initialized with options from the given map of environment variables (per <code>env-&gt;database-opts</code>.)</p></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/components/database.clj#L70">view source</a></div></div></div></body></html>