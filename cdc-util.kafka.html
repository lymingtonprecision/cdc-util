<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>cdc-util.kafka documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Cdc-util</span> <span class="project-version">1.3.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cdc-util</span></div></div></li><li class="depth-2 branch"><a href="cdc-util.async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>components</span></div></div></li><li class="depth-3"><a href="cdc-util.components.database.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>database</span></div></a></li><li class="depth-2 branch"><a href="cdc-util.env.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>env</span></div></a></li><li class="depth-2 branch"><a href="cdc-util.filter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>filter</span></div></a></li><li class="depth-2 branch"><a href="cdc-util.format.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>format</span></div></a></li><li class="depth-2 branch current"><a href="cdc-util.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-2"><a href="cdc-util.schema.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schema</span></div></a></li><li class="depth-3"><a href="cdc-util.schema.oracle-refs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oracle-refs</span></div></a></li><li class="depth-2"><a href="cdc-util.validate.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>validate</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="cdc-util.kafka.html#var-bootstrap-servers"><div class="inner"><span>bootstrap-servers</span></div></a></li><li class="depth-1"><a href="cdc-util.kafka.html#var-ccd-topic-onto-chan"><div class="inner"><span>ccd-topic-onto-chan</span></div></a></li><li class="depth-1"><a href="cdc-util.kafka.html#var-create-control-topic.21"><div class="inner"><span>create-control-topic!</span></div></a></li><li class="depth-1"><a href="cdc-util.kafka.html#var-default-control-topic"><div class="inner"><span>default-control-topic</span></div></a></li><li class="depth-1"><a href="cdc-util.kafka.html#var-reset-offset.21"><div class="inner"><span>reset-offset!</span></div></a></li><li class="depth-1"><a href="cdc-util.kafka.html#var-send-ccd"><div class="inner"><span>send-ccd</span></div></a></li><li class="depth-1"><a href="cdc-util.kafka.html#var-topic-.3Elast-known-ccd-states"><div class="inner"><span>topic-&gt;last-known-ccd-states</span></div></a></li><li class="depth-1"><a href="cdc-util.kafka.html#var-topic-exists.3F"><div class="inner"><span>topic-exists?</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">cdc-util.kafka</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-bootstrap-servers"><h3>bootstrap-servers</h3><div class="usage"><code>(bootstrap-servers zk-connect)</code></div><div class="doc"><div class="markdown"><p>Returns the Kafka bootstrap server string for the brokers connected to the specified ZooKeeper quorum.</p></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/kafka.clj#L34">view source</a></div></div><div class="public anchor" id="var-ccd-topic-onto-chan"><h3>ccd-topic-onto-chan</h3><div class="usage"><code>(ccd-topic-onto-chan ch topic kafka-config)</code></div><div class="doc"><div class="markdown"><p>Returns a <code>java.io.Closeable</code> loop that posts any Change Capture Definitions submitted to the specified topic onto the given channel.</p></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/kafka.clj#L82">view source</a></div></div><div class="public anchor" id="var-create-control-topic.21"><h3>create-control-topic!</h3><div class="usage"><code>(create-control-topic! {zkc &quot;zookeeper.connect&quot;, :as kafka-config} topic)</code></div><div class="doc"><div class="markdown"><p>Creates the specified control topic within the given Kafka configuration.</p></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/kafka.clj#L49">view source</a></div></div><div class="public anchor" id="var-default-control-topic"><h3>default-control-topic</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/kafka.clj#L31">view source</a></div></div><div class="public anchor" id="var-reset-offset.21"><h3>reset-offset!</h3><div class="usage"><code>(reset-offset! {zkc &quot;zookeeper.connect&quot;, group-id &quot;group.id&quot;, :as kafka-config} topic offset)</code></div><div class="doc"><div class="markdown"><p>Resets the consumer offset on the specified topic of the given Kafka consumer group.</p></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/kafka.clj#L16">view source</a></div></div><div class="public anchor" id="var-send-ccd"><h3>send-ccd</h3><div class="usage"><code>(send-ccd kafka-producer topic ccd)</code></div><div class="doc"><div class="markdown"><p>Sends the given Change Capture Definition record to the specified topic via the provided Kafka producer.</p>
<p>Returns the future encapsulating the send op.</p></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/kafka.clj#L93">view source</a></div></div><div class="public anchor" id="var-topic-.3Elast-known-ccd-states"><h3>topic-&gt;last-known-ccd-states</h3><div class="usage"><code>(topic-&gt;last-known-ccd-states kafka-config topic)</code></div><div class="doc"><div class="markdown"><p>Reads all messages posted to the specified control topic and returns a collection of the last known states of the CCDs they represent.</p>
<p>Resets the consumer offset for the topic to the maximum offset read.</p></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/kafka.clj#L63">view source</a></div></div><div class="public anchor" id="var-topic-exists.3F"><h3>topic-exists?</h3><div class="usage"><code>(topic-exists? {zkc &quot;zookeeper.connect&quot;, :as kafka-config} topic)</code></div><div class="doc"><div class="markdown"><p>Returns truthy if the specified topic exists within the given Kafka configuration.</p></div></div><div class="src-link"><a href="https://github.com/lymingtonprecision/cdc-util/blob/master/src/cdc_util/kafka.clj#L42">view source</a></div></div></div></body></html>